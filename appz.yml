app:
    name: keycloak
    code: keycloak
    notify: appzdev@cloudbourne.co

build:
    version: 13.0
    env: DEV
    build_file: none
    output_files: output/*.zip
    image_template: keycloak-13.0

deploy:
    context: francisjoy/DEV
    replicas: 2
    port:
    - 8080
  
properties:
    KEYCLOAK_USER: admin
    KEYCLOAK_PASSWORD:
      vault: KEYCLOAK_PASSWORD
    DB_VENDOR: postgres
    DB_ADDR: postgres13-master-13-x
    DB_DATABASE: keycloak
    DB_USER: keycloak
    DB_SCHEMA: public
    DB_PASSWORD:
      vault: DB_PASSWORD
    KEYCLOAK_LOGLEVEL: DEBUG
    ROOT_LOGLEVEL: DEBUG
    PROXY_ADDRESS_FORWARDING: true
    
    #KEYCLOAK_HTTP_PORT: "80"
    #KEYCLOAK_HTTPS_PORT: "443" 
    KEYCLOAK_HOSTNAME: francisjoy-dev-keycloak-13-0.038c839d.lowtouch.cloud/auth
    CACHE_OWNERS_COUNT: "2"
    CACHE_OWNERS_AUTH_SESSIONS_COUNT: "2"    

    JGROUPS_DISCOVERY_PROTOCOL: dns.DNS_PING
    #JGROUPS_DISCOVERY_PROPERTIES: dns_query=keycloak-svc
    #CACHE_OWNERS_COUNT: "2"
    #CACHE_OWNERS_AUTH_SESSIONS_COUNT: "2"
    #PROXY_ADDRESS_FORWARDING: "true"
    #ingress:
     #   annotations:
     #       ingress.kubernetes.io/affinity: cookie
    
    revision : 32
